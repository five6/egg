{"version":3,"sources":["webpack:///./src/actions/album.js","webpack:///./src/containers/album/AlbumsRoot.js","webpack:///./src/components/album/Album.js","webpack:///./src/components/album/Albums.js","webpack:///./src/constants/ActionTypes.album.js","webpack:///./src/constants/actionTypes.album.js","webpack:///./src/containers/album/Albums.js","webpack:///./src/entry/albums.js","webpack:///./src/reducers/album.js"],"names":["action_get_albums","albums","type","action_received_albums","action_delete_album","albumId","action_received_delete_album","action_add_album","album","action_received_add_album","action_add_photo","photos","action_received_add_photo","action_delete_photo","photoId","action_received_delete_photo","ajax_get_albums","dispatch","$","ajax","url","method","success","result","error","err","status","console","log","ajax_create_albums","data","e5Fdxrr","ajax_upload_photos","formData","FormData","append","i","length","file","contentType","processData","fetch_ajax_create_albums","getState","fetch_ajax_get_albums","fetch_ajax_uploadPhotos","getstate","AlbumsRoot","React","Component","render","Album","constructor","props","componentDidMount","map","photo","src","Albums","showCreateAlbumModal","bind","onclickCreateAlbum","showUpdatePhotosModal","onclickUpdatePhotos","createDate","onClickAddPhoto","previewPhoto","setUniqueKey","removeSelectedPhoto","onmouseoutPhoto","onmouseoverPhoto","state","needUploadPhotos","needUploadPhotosNames","onUpdatePhotoInputChange","e","oldValues","newValues","target","files","_","filter","nw","find","ow","names","self","each","v","key","push","setState","concat","randomFlag","min","max","str","pos","range","arr","Math","round","random","dropdown","checkbox","modal","trigger","element","refs","selectAlbum","value","uploadPhotos","next","addClass","removeClass","name","preAlbumName","description","preAlbumDescription","topic","preAlbumTopic","val","authority","albumAuthority","createAlbum","window","createObjectURL","undefined","URL","webkitURL","getAttribute","form","fields","albumName","albumDescription","date","moment","format","firstAlbum","_id","create_at","F_ALBUMS","R_ALBUMS","F_ALBUM","R_ALBUM","ADD_ALBUM","R_ADD_ALBUM","DEL_ALBUM","R_DEL_ALBUM","ADD_PHOTO","R_ADD_PHOTO","DEL_PHOTO","R_DEL_PHOTO","AlbumApp","deleteAlbum","updateAlbum","getAlbums","alert","propTypes","PropTypes","array","isRequired","mapStateToProps","connect","nodeDiv","document","getElementById","ReactDOM","initState","albumReducer","action","Object","assign","middleware","process","env","NODE_ENV","createLogger","store","createStore","applyMiddleware"],"mappings":"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","file":"albums.js","sourcesContent":["import * as types  from '../constants/ActionTypes.album';\r\n\r\nexport function action_get_albums(albums) {\r\n    return {\r\n        type:types.F_ALBUMS,\r\n        albums:albums\r\n    }\r\n}\r\nexport function action_received_albums(albums) {\r\n    return{\r\n        type:types.R_ALBUMS,\r\n        albums\r\n    }\r\n}\r\n\r\nexport function action_delete_album(albumId) {\r\n    return{\r\n        type:types.DEL_ALBUM,\r\n        albumId\r\n    }\r\n}\r\nexport function action_received_delete_album(albumId) {\r\n    return{\r\n        type:types.R_DEL_ALBUM,\r\n        albumId\r\n    }\r\n}\r\n\r\nexport function action_add_album(album) {\r\n    return{\r\n        type:types.ADD_ALBUM,\r\n        album\r\n    }\r\n}\r\nexport function action_received_add_album(album) {\r\n    return{\r\n        type:types.R_ADD_ALBUM,\r\n        album\r\n    }\r\n}\r\n\r\nexport function action_add_photo(albumId,photos) {\r\n    return{\r\n        type:types.ADD_PHOTO,\r\n        albumId,\r\n        photos\r\n    }\r\n}\r\nexport function action_received_add_photo(albumId,photos) {\r\n    return{\r\n        type:types.R_ADD_PHOTO,\r\n        albumId,\r\n        photos\r\n    }\r\n}\r\n\r\nexport function action_delete_photo(photoId) {\r\n    return{\r\n        type:types.DEL_PHOTO,\r\n        photoId\r\n    }\r\n}\r\nexport function action_received_delete_photo(photoId) {\r\n    return{\r\n        type:types.R_DEL_PHOTO,\r\n        photoId\r\n    }\r\n}\r\n\r\nconst ajax_get_albums = albums => dispatch => {\r\n    dispatch(action_get_albums(albums));\r\n    $.ajax({\r\n        url:\"/api/albums\",\r\n        method:\"get\",\r\n        type:\"json\",\r\n        success:function(result){\r\n            const albums = result.albums;\r\n            dispatch(action_received_albums(albums));\r\n        },\r\n        error:function(err,status){\r\n            console.log(err);\r\n        }\r\n    })\r\n};\r\nconst ajax_create_albums = album => dispatch => {\r\n    dispatch(action_add_album(album));\r\n    $.ajax({\r\n        url:\"/api/albums\",\r\n        method:\"post\",\r\n        type:\"json\",\r\n        data:album,\r\n        success:function(result){\r\n            const album = result.album||{};\r\n            dispatch(action_received_add_album(album));\r\n        },\r\n        error:function(e5Fdxrr,status){\r\n            console.log(err);\r\n        }\r\n    })\r\n};\r\n\r\nconst ajax_upload_photos = (albumId,photos) => dispatch => {\r\n    dispatch(action_add_photo(albumId,photos));\r\n    var formData = new FormData();\r\n    formData.append(\"albumId\",albumId);\r\n    for(let i =0;i< photos.length ;photos++){\r\n        formData.append(\"file\",photos[i].file);\r\n    }\r\n    $.ajax({\r\n        url:\"/api/albums/\"+albumId+\"/photos\",\r\n        method:\"post\",\r\n        type:\"json\",\r\n        contentType:\"multipart/form-data\",\r\n        data:formData,\r\n        processData: false,\r\n        success:function(result){\r\n            const album = result.album||{};\r\n            dispatch(action_received_add_photo(albumId,photos));\r\n        },\r\n        error:function(err,status){\r\n            console.log(err);\r\n        }\r\n\r\n    })\r\n}\r\n\r\nexport const fetch_ajax_create_albums = album => (dispatch,getState) => {\r\n    dispatch(ajax_create_albums(album));\r\n};\r\nexport const fetch_ajax_get_albums = albums => (dispatch,getState) => {\r\n    dispatch(ajax_get_albums(albums));\r\n};\r\nexport const fetch_ajax_uploadPhotos = (albumId,photos) => (dispatch,getstate) => {\r\n    dispatch(ajax_upload_photos(albumId,photos));\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/actions/album.js","import React from 'react';\r\nimport {Provider} from 'react-redux';\r\nimport AlbumApp from './Albums';\r\nimport store from '../../reducers/album';\r\n\r\nexport default class AlbumsRoot extends React.Component{\r\n    render(){\r\n        return(\r\n            <Provider store={store} >\r\n                <AlbumApp />\r\n            </Provider>\r\n        )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/containers/album/AlbumsRoot.js","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Grid } from 'antd-mobile';\r\nexport default class Album extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\r\n\t}\r\n\trender(){\r\n\t\tconst {photos} = this.props;\r\n\t\treturn(\r\n            <div>\r\n                {\r\n                    photos.map(photo=> {\r\n\t\t\t\t\t\t<div className=\"album\">\r\n\t\t\t\t\t\t\t<div className=\"photo\">\r\n\t\t\t\t\t\t\t\t<img src={photo.src}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\r\n\t\t)\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/album/Album.js","import React from 'react';\r\nimport {findAlbums} from  '../../actions/album';\r\nimport Album from './Album';\r\nimport _ from 'lodash';\r\n\r\nexport default class Albums extends React.Component{\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.showCreateAlbumModal = this.showCreateAlbumModal.bind(this);\r\n\t\tthis.onclickCreateAlbum = this.onclickCreateAlbum.bind(this);\r\n\t\tthis.showUpdatePhotosModal = this.showUpdatePhotosModal.bind(this);\r\n\t\tthis.onclickUpdatePhotos = this.onclickUpdatePhotos.bind(this);\r\n\t\tthis.createDate = this.createDate.bind(this);\r\n\t\tthis.onClickAddPhoto = this.onClickAddPhoto.bind(this);\r\n\t\tthis.previewPhoto = this.previewPhoto.bind(this);\r\n\t\tthis.setUniqueKey = this.setUniqueKey.bind(this);\r\n\t\tthis.removeSelectedPhoto = this.removeSelectedPhoto.bind(this);\r\n\t\tthis.onmouseoutPhoto = this.onmouseoutPhoto.bind(this);\r\n\t\tthis.onmouseoverPhoto = this.onmouseoverPhoto.bind(this);\r\n\t\tthis.state = {\r\n            needUploadPhotos:[],\r\n            needUploadPhotosNames:[]\r\n\t\t}\r\n\t}\r\n    onUpdatePhotoInputChange(e){\r\n\t    let oldValues = this.state.needUploadPhotos;\r\n        let newValues = e.target.files;\r\n        newValues =_.filter(newValues,function (nw) {\r\n            const file = _.find(oldValues,function (ow) {\r\n                return ow.file === nw.file;\r\n            });\r\n            if(file){\r\n                return false;\r\n            }else{\r\n                return true;\r\n            }\r\n        });\r\n\t    let names = [];\r\n\t    let files =[];\r\n\t    const self = this;\r\n\t    _.each(newValues,function (v) {\r\n            const url = self.previewPhoto(v);\r\n            const key = self.setUniqueKey(false,32);\r\n            files.push({\r\n                file:v,\r\n                key:key\r\n            });\r\n            names.push({\r\n                url:url,\r\n                key:key\r\n            });\r\n        });\r\n\t    this.setState({\r\n            needUploadPhotos:self.state.needUploadPhotos.concat(files),\r\n            needUploadPhotosNames:self.state.needUploadPhotosNames.concat(names)\r\n        });\r\n\t    console.log(this.state.needUploadPhotos);\r\n    }\r\n    setUniqueKey(randomFlag, min, max){\r\n        var str = \"\",\r\n            pos =0,\r\n            range = min,\r\n            arr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n        // 随机产生\r\n        if(randomFlag){\r\n            range = Math.round(Math.random() * (max-min)) + min;\r\n        }\r\n        for(var i=0; i<range; i++){\r\n            pos = Math.round(Math.random() * (arr.length-1));\r\n            str += arr[pos];\r\n        }\r\n        return str;\r\n    }\r\n    showCreateAlbumModal(){\r\n        $('.albumAuthority').dropdown();\r\n        $('.ui.radio.albumTopic').checkbox();\r\n        $('.createAlbumModal').modal('show');\r\n    }\r\n    showUpdatePhotosModal(){\r\n\r\n        //$('.selectAlbum').dropdown();\r\n        $(\".updatePhotosModal\").modal('show');\r\n\r\n    }\r\n    onClickAddPhoto(){\r\n        $(\"#inputAddPhoto\").trigger(\"click\");\r\n    }\r\n    onclickUpdatePhotos(element){\r\n        const photos = this.state.needUploadPhotos;\r\n        const albumId = this.refs.selectAlbum.value;\r\n        if(!albumId || !photos.length){\r\n            return;\r\n        }\r\n        this.props.uploadPhotos(albumId,photos);\r\n    }\r\n    onmouseoverPhoto(e){\r\n        if(e.target)\r\n        $(e.target).next().addClass(\"remove-photo-span-in\");\r\n    }\r\n    onmouseoutPhoto(e){\r\n        $(e.target).next().removeClass(\"remove-photo-span-in\");\r\n\r\n    }\r\n\r\n    onclickCreateAlbum(element){\r\n        const name = this.refs.preAlbumName.value;\r\n        const description = this.refs.preAlbumDescription.value;\r\n        const topic = $(this.refs.preAlbumTopic).find(\"input[type='radio']:checked\").val();\r\n        const authority = this.refs.albumAuthority.value;\r\n        const album = {\r\n            name:name,\r\n            description:description,\r\n            authority:authority,\r\n            topic:topic\r\n        };\r\n        this.props.createAlbum(album);\r\n        $('.createAlbumModal').modal('hide');\r\n    }\r\n    previewPhoto(file){\r\n        var url = null;\r\n        if (window.createObjectURL != undefined) {\r\n            url = window.createObjectURL(file)\r\n        } else if (window.URL != undefined) {\r\n            url = window.URL.createObjectURL(file)\r\n        } else if (window.webkitURL != undefined) {\r\n            url = window.webkitURL.createObjectURL(file)\r\n        }\r\n        return url\r\n    }\r\n    removeSelectedPhoto(e){\r\n        const key = e.target.getAttribute(\"data-photo-key\");\r\n        let photos = this.state.needUploadPhotos;\r\n        let names  = this.state.needUploadPhotosNames;\r\n        photos =_.filter(photos,function (photo) {\r\n           return photo.key !== key;\r\n        });\r\n        names =_.filter(names,function (name) {\r\n            return name.key !== key;\r\n        });\r\n        this.setState({\r\n            needUploadPhotos:photos,\r\n            needUploadPhotosNames:names\r\n        })\r\n    }\r\n\tcomponentDidMount() {\r\n         $('#createAlbumform').form({\r\n          fields: {\r\n            albumName : 'empty',\r\n            albumDescription : 'empty',\r\n            topic : 'empty',\r\n            albumAuthority : 'empty'\r\n        }   \r\n     });\r\n    }\r\n    createDate(date){\r\n        return moment(date).format(\"YYYY年MM月DD日 HH:mm:ss\");\r\n    }\r\n\trender(){\r\n\t\tconst {albums} = this.props;\r\n\t\tconst firstAlbum = albums[0]||{};\r\n\t\treturn(\r\n\t\t\t<div className=\"ui\">\r\n                <div className=\"toolbar\">\r\n                    <div className=\"ui buttons\">\r\n                        <button onClick={(e)=> this.showUpdatePhotosModal(e)} className=\"ui red basic button\">上传照片</button>\r\n                        <button onClick={(e)=> this.showCreateAlbumModal(e)} className=\"ui green basic button\">创建相册</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"albums\" id=\"albums-albums\">\r\n                    <div className=\"ui cards\">\r\n                    {albums.map(album =>\r\n                        <div className=\"card\" key={album._id}>\r\n                            <div className=\"image\">\r\n                                <img src=\"../public/images/bg.png\"/>\r\n                            </div>\r\n                            <div className=\"content\">\r\n                                <a className=\"header\">{album.name}</a>\r\n                                <div className=\"meta\">\r\n                                    <span className=\"date\">{this.createDate(album.create_at)}</span>\r\n                                </div>\r\n                                <div className=\"description\">{album.description}</div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"ui modal createAlbumModal\">\r\n                    <div className=\"header\">创建相册</div>\r\n                    <div className=\"content\">\r\n                        <div id=\"createAlbumform\">\r\n                              <form  action=\"/api/albums\" method=\"post\">\r\n                                 <div className=\"ui form\">\r\n                                    <div className=\"field\">\r\n                                        <label>相册名称</label>\r\n                                        <div className=\"ui left icon input\">\r\n                                            <input type=\"text\" ref=\"preAlbumName\"  name=\"albumName\" maxLength=\"30\" placeholder=\"\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"field\">\r\n                                        <label>相册描述</label>\r\n                                        <div className=\"ui left icon input\">\r\n                                            <textarea ref=\"preAlbumDescription\" name=\"albumDescription\" maxLength=\"2000\" rows=\"5\" cols=\"8\" placeholder=\"非必填\"></textarea>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"inline fields\" ref=\"preAlbumTopic\">\r\n                                        <label htmlFor=\"topic\">主题</label>\r\n                                        <div className=\"field\">\r\n                                            <div className=\"ui radio checkbox albumTopic\">\r\n                                                <input type=\"radio\"   name=\"topic\" value=\"0\" defaultChecked tabIndex=\"0\" className=\"hidden\"/>\r\n                                                    <label>普通</label>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"field\">\r\n                                            <div className=\"ui radio checkbox albumTopic\">\r\n                                                <input type=\"radio\" name=\"topic\" value=\"1\"  tabIndex=\"0\" className=\"hidden\"/>\r\n                                                    <label>亲子</label>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"field\">\r\n                                            <div className=\"ui radio checkbox albumTopic\">\r\n                                                <input type=\"radio\"  name=\"topic\" value=\"2\" tabIndex=\"0\" className=\"hidden\" />\r\n                                                    <label>旅游</label>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"field\">\r\n                                            <div className=\"ui radio checkbox albumTopic\">\r\n                                                <input type=\"radio\" name=\"topic\" value=\"3\" tabIndex=\"0\" className=\"hidden\" />\r\n                                                    <label>校友</label>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"field\">\r\n                                        <label>权限</label>\r\n                                        <div className=\"ui albumAuthority selection dropdown\">\r\n                                            <input type=\"hidden\" name=\"albumAuthority\" ref=\"albumAuthority\"/>\r\n                                            <i className=\"dropdown icon\"></i>\r\n                                            <div className=\"default text\">所有人可见</div>\r\n                                            <div className=\"menu\">\r\n                                                <div className=\"item\" data-value=\"0\">所有人可见</div>\r\n                                                <div className=\"item\" data-value=\"1\">朋友可见</div>\r\n                                                <div className=\"item\" data-value=\"2\">仅自己可见</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"actions\">\r\n                        <div onClick={(e) => this.onclickCreateAlbum(e)} className=\"ui blue button\">确定</div>\r\n                        <div className=\"ui cancel grey button\">取消</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"ui modal updatePhotosModal fullscreen\">\r\n                    <div className=\"header\">上传照片</div>\r\n                    <div className=\"content\">\r\n                        <div id=\"updatePhotosform\">\r\n                            <form  action=\"/api/albums\" method=\"post\" encType=\"multipart/form-data\">\r\n                                <div className=\"ui form\">\r\n                                    <div className=\"field\">\r\n                                        <label>上传到</label>\r\n                                        <select defaultValue={firstAlbum._id} className=\"ui selectAlbum\" ref=\"selectAlbum\">\r\n                                            {albums.map(album =>\r\n                                                <option value={album._id} key={album._id}>{album.name}</option>\r\n                                            )}\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className=\"field\">\r\n                                        <label></label>\r\n                                        <div className=\"ui left\">\r\n                                            <div className=\"ui tiny images\">\r\n                                                {\r\n                                                    this.state.needUploadPhotosNames.map ((photo) =>\r\n                                                        <div key={photo.key} className=\"ui image uploadPhoto-preview-img\">\r\n                                                            <img className=\"ui image\" src={photo.url}  />\r\n                                                            <span data-photo-key={photo.key}  onClick={(e)=>this.removeSelectedPhoto(e)} className=\"remove-photo-span\" >X</span>\r\n                                                        </div>\r\n                                                    )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"field\">\r\n                                        <label></label>\r\n                                        <div className=\"ui left icon input\">\r\n                                            <div>\r\n                                                <input type=\"file\" onChange={(e)=> this.onUpdatePhotoInputChange(e)}  accept=\"image/*\"  className=\"input-addPhoto\" id=\"inputAddPhoto\" multiple />\r\n                                                <button type=\"button\" className=\"ui green button\" onClick={this.onClickAddPhoto}>添加照片<i className=\"upload icon\"></i></button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"actions\">\r\n                        <div onClick={(e) => this.onclickUpdatePhotos(e)} className=\"ui blue button\">确定</div>\r\n                        <div className=\"ui cancel grey button\">取消</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/album/Albums.js","export const F_ALBUMS = \"F_ALBUMS\";\r\nexport const R_ALBUMS =\"R_ALBUMS\";\r\n\r\nexport const F_ALBUM = \"F_ALBUM\";\r\nexport const R_ALBUM = \"R_ALBUM\";\r\n\r\nexport const ADD_ALBUM =\"ADD_ALBUM\";\r\nexport const R_ADD_ALBUM = \"R_ADD_ALBUM\";\r\n\r\nexport const DEL_ALBUM = \"DEL_ALBUM\";\r\nexport const R_DEL_ALBUM =\"R_DEL_ALBUM\";\r\n\r\nexport const ADD_PHOTO = \"ADD_PHOTO\";\r\nexport const R_ADD_PHOTO = \"R_ADD_PHOTO\";\r\n\r\nexport const DEL_PHOTO = \"DEL_PHOTO\";\r\nexport const R_DEL_PHOTO = \"R_DEL_PHOTO\";\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/ActionTypes.album.js","export const F_ALBUMS = \"F_ALBUMS\";\r\nexport const R_ALBUMS =\"R_ALBUMS\";\r\n\r\nexport const F_ALBUM = \"F_ALBUM\";\r\nexport const R_ALBUM = \"R_ALBUM\";\r\n\r\nexport const ADD_ALBUM =\"ADD_ALBUM\";\r\nexport const R_ADD_ALBUM = \"R_ADD_ALBUM\";\r\n\r\nexport const DEL_ALBUM = \"DEL_ALBUM\";\r\nexport const R_DEL_ALBUM =\"R_DEL_ALBUM\";\r\n\r\nexport const ADD_PHOTO = \"ADD_PHOTO\";\r\nexport const R_ADD_PHOTO = \"R_ADD_PHOTO\";\r\n\r\nexport const DEL_PHOTO = \"DEL_PHOTO\";\r\nexport const R_DEL_PHOTO = \"R_DEL_PHOTO\";\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/actionTypes.album.js","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport {connect} from 'react-redux';\r\nimport Albums from '../../components/album/Albums';\r\nimport {fetch_ajax_create_albums,fetch_ajax_get_albums,fetch_ajax_uploadPhotos} from '../../actions/album';\r\nclass AlbumApp extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.createAlbum = this.createAlbum.bind(this);\r\n        this.deleteAlbum = this.deleteAlbum.bind(this);\r\n        this.updateAlbum = this.updateAlbum.bind(this);\r\n        this.getAlbums = this.getAlbums.bind(this);\r\n        this.uploadPhotos = this.uploadPhotos.bind(this);\r\n        this.props.dispatch(fetch_ajax_get_albums(props.albums));\r\n    }\r\n    componentDidMount(){\r\n        \r\n    }\r\n    getAlbums(){\r\n      alert(\"get albums\");\r\n    }\r\n    createAlbum(album){\r\n        this.props.dispatch(fetch_ajax_create_albums(album));\r\n    }\r\n    deleteAlbum(){\r\n      alert(\"delete alubm\");\r\n    }\r\n    updateAlbum(){\r\n      alert(\"update album\");\r\n    }\r\n    uploadPhotos(albumId,photos){\r\n        this.props.dispatch(fetch_ajax_uploadPhotos(albumId,photos));\r\n    }\r\n    render(){\r\n    \treturn(\r\n            <Albums updateAlbum={this.updateAlbum} deleteAlbum={this.deleteAlbum} createAlbum={this.createAlbum}  getAlbums={this.getAlbums} uploadPhotos = {this.uploadPhotos} albums={this.props.albums} />\r\n\t\t);\r\n    }\r\n\r\n}\r\nAlbumApp.propTypes = {\r\n  albums: PropTypes.array.isRequired\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n  \talbums:state.albums,\r\n  }\r\n}\r\nexport default connect(\r\n mapStateToProps\r\n)(AlbumApp)\n\n\n// WEBPACK FOOTER //\n// ./src/containers/album/Albums.js","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AlbumsRoot from '../containers/album/AlbumsRoot';\r\n\r\nconst nodeDiv =document.getElementById(\"album-container\");\r\nReactDOM.render(\r\n    <AlbumsRoot />,\r\n    nodeDiv\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/entry/albums.js","import * as types from '../constants/actionTypes.album';\r\nimport {createStore,combineReducers,applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport {createLogger}  from 'redux-logger';\r\nimport \t_ from 'lodash';\r\nconst initState = {\r\n  albums:[]\r\n};\r\n\r\nfunction albumReducer(state = initState,action) {\r\n    switch (action.type){\r\n        case types.F_ALBUMS:\r\n            return Object.assign({},state,{\r\n                albums:action.albums\r\n            });\r\n            break;\r\n        case types.R_ALBUMS:\r\n            return Object.assign({},state,{\r\n                albums:action.albums\r\n            });\r\n            break;\r\n        case types.F_ALBUM:\r\n            break;\r\n        case types.R_ALBUM:\r\n            break;\r\n            \r\n            \r\n        case types.ADD_ALBUM:\r\n            console.log(\"添加相册！\")\r\n            return Object.assign({},state,{\r\n                album:action.album\r\n            });\r\n            break;\r\n        case types.R_ADD_ALBUM:\r\n            console.log(\"成功添加相册！\");\r\n            return Object.assign({},state,{\r\n                album:action.album,\r\n                albums:state.albums.concat([action.album])\r\n            });\r\n            break;\r\n        case types.DEL_ALBUM:\r\n            break;\r\n        case types.R_DEL_ALBUM:\r\n            break;\r\n\r\n\r\n        case types.ADD_PHOTO:\r\n            return Object.assign({},state,{\r\n                albumId:action.albumId,\r\n                photos:action.photos\r\n            });\r\n            break;\r\n        case types.R_ADD_PHOTO:\r\n            return Object.assign({},state,{\r\n                albums:state.albums,\r\n            });\r\n            break;\r\n            \r\n            \r\n        case types.DEL_PHOTO:\r\n            break;\r\n        case types.R_DEL_PHOTO:\r\n            break;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nconst middleware = [thunk];\r\nif (process.env.NODE_ENV !== 'production') {\r\n    middleware.push(createLogger())\r\n}\r\nconst store = createStore(\r\n    albumReducer,\r\n    applyMiddleware(...middleware)\r\n);\r\nexport default store;\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/album.js"],"sourceRoot":""}